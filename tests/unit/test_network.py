"""Unit tests for the network module.\n\n"""\n\nfrom unittest.mock import Mock, patch\n\nimport pytest\n\nfrom newspaper.configuration import Configuration\nfrom newspaper.exceptions import ArticleException\nfrom newspaper.network import get_html\n\n\nclass TestNetwork:\n    """Test network module functions."""\n\n    def test_get_html_exception_contains_status_code(self):\n        """Test that ArticleException properly includes the status_code in its message.\n\n        This test verifies the fix for the bug where the f-string had double braces\n        {{status_code}} instead of single braces {{status_code}}, causing the status\n        code to not be interpolated into the exception message.\n        """\n        # Create a mock response with a 400 status code\n        mock_response = Mock()\n        mock_response.status_code = 400\n        mock_response.text = "Bad Request"\n        mock_response.content = b"Bad Request"\n        mock_response.headers = {}\n        mock_response.encoding = "utf-8"\n        mock_response.history = []\n\n        # Configure to raise exception on http errors\n        config = Configuration()\n        config.http_success_only = True\n\n        # Mock do_request to return our mock response\n        with patch("newspaper.network.do_request", return_value=mock_response):\n            with pytest.raises(ArticleException) as exc_info:\n                get_html("https://example.com/test", config=config)\n\n            # The exception message should contain the actual status code number\n            exception_message = str(exc_info.value)\n\n            # Check if the status code is actually in the message (not just the literal string)\n            assert "400" in exception_message, (\n                f"Expected '400' to be in exception message, but got: {exception_message}"\n            )\n            assert "{status_code}" not in exception_message, "Expected status_code to be interpolated, not literal"\n            assert "Status code: 400" in exception_message\n\n    def test_get_html_exception_different_status_codes(self):\n        """Test that ArticleException properly includes various status codes."""\n        test_cases = [400, 401, 403, 404, 500, 502, 503]\n\n        config = Configuration()\n        config.http_success_only = True\n\n        for status_code in test_cases:\n            # Create a mock response with the current status code\n            mock_response = Mock()\n            mock_response.status_code = status_code\n            mock_response.text = f"Error {status_code}"\n            mock_response.content = f"Error {status_code}".encode()\n            mock_response.headers = {}\n            mock_response.encoding = "utf-8"\n            mock_response.history = []\n\n            # Mock do_request to return our mock response\n            with patch("newspaper.network.do_request", return_value=mock_response):\n                with pytest.raises(ArticleException) as exc_info:\n                    get_html("https://example.com/test", config=config)\n\n                # The exception message should contain the actual status code number\n                exception_message = str(exc_info.value)\n                assert str(status_code) in exception_message, (\n                    f"Expected '{status_code}' to be in exception message, but got: {exception_message}"\n                )\n